(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-allUsers"],{"0d67":function(t,e,a){"use strict";var i=a("5fd5"),o=a.n(i);o.a},"437f":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".detail-img[data-v-ed28b6f4]{width:%?280?%;height:%?280?%;margin-left:%?24?%}",""])},5576:function(t,e,a){"use strict";a.r(e);var i=a("69dc"),o=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=o.a},"5fd5":function(t,e,a){var i=a("437f");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("4f06").default;o("dce038d0",i,!0,{sourceMap:!1,shadowMode:!1})},"69dc":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{users:[],showEmail:!1,emailBody:"",emailTitle:"",nowKey:0}},onLoad:function(){var t=this;this.$toast.loading({duration:0,forbidClick:!0,message:"加载中"});var e=a("9ad7"),i={method:"POST",uri:"http://101.201.70.76:8211/getUsers"};e(i).then(function(e){t.$toast.clear(),"error"==e?t.$toast.fail("加载失败，未找到用户信息"):(t.users=JSON.parse(e),console.log(t.users),t.$toast.success("加载成功"))}).catch(function(e){t.$toast.clear(),t.$toast.fail("加载失败, 请检查网络连接"),console.log(e)})},methods:{showSendEmail:function(t){this.nowKey=t,this.emailTitle="",this.emailBody="",this.showEmail=!0},sendEmail:function(){var t=this;this.$toast.loading({duration:0,forbidClick:!0,message:"发送中"});var e=a("9ad7"),i={method:"POST",uri:"http://101.201.70.76:8211/sendEmail",form:{email:this.users[this.nowKey].email,title:this.emailTitle,body:this.emailBody}};e(i).then(function(e){t.showEmail=!1,console.log(e),t.$toast.clear(),t.$toast.success("发送成功")}).catch(function(e){t.$toast.clear(),t.$toast.fail("发送失败, 请检查网络连接"),console.log(e)})},userEOP:function(t){var e=this;this.$toast.loading({duration:0,forbidClick:!0,message:"提交中"});var i=a("9ad7"),o={method:"POST",uri:"http://101.201.70.76:8211/userEOP",form:{id:this.users[t].id,power:2}};i(o).then(function(t){e.$toast.clear(),e.$toast.success("提升成功")}).catch(function(t){e.$toast.clear(),e.$toast.fail("提升失败")})}}};e.default=i},"9cf4":function(t,e,a){"use strict";a.r(e);var i=a("e437"),o=a("5576");for(var s in o)"default"!==s&&function(t){a.d(e,t,function(){return o[t]})}(s);a("0d67");var n=a("2877"),l=Object(n["a"])(o["default"],i["a"],i["b"],!1,null,"ed28b6f4",null);e["default"]=l.exports},e437:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[t._l(t.users,function(e,i){return a("v-uni-view",{key:i},[a("van-panel",{attrs:{title:e.username,desc:e.name,status:e.email}},[a("img",{staticClass:"detail-img",attrs:{src:"data:image/png;base64,"+e.avatar}}),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("van-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){e=t.$handleEvent(e),t.showSendEmail(i)}}},[t._v("发送邮件")]),a("van-button",{attrs:{size:"small",type:"info"},on:{click:function(e){e=t.$handleEvent(e),t.userEOP(i)}}},[t._v("提升权限")])],1)])],1)}),a("van-popup",{style:{height:"50%"},attrs:{position:"bottom"},model:{value:t.showEmail,callback:function(e){t.showEmail=e},expression:"showEmail"}},[a("van-field",{attrs:{label:"邮件标题",placeholder:"请输入邮件标题"},model:{value:t.emailTitle,callback:function(e){t.emailTitle=e},expression:"emailTitle"}}),a("van-field",{attrs:{rows:"1",autosize:"",label:"邮件内容",type:"textarea",placeholder:"请输入邮件内容"},model:{value:t.emailBody,callback:function(e){t.emailBody=e},expression:"emailBody"}}),a("van-button",{attrs:{size:"large",type:"info"},on:{click:function(e){e=t.$handleEvent(e),t.sendEmail()}}},[t._v("发送")])],1)],2)},o=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return o})}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-register-register"],{"0cbc":function(e,a,t){"use strict";var n=t("288e");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("7f7f");var i=n(t("e814")),s={data:function(){return{disabled:!1,checked:!0,show:!1,username:"",email:"",name:"",pnum:"",gender:"0",password:"",password1:"",sms:"",err:"",errpnum:"",identifyCode:"",imgfile:"",avatar:"",time:0,count:60}},methods:{onPswChanged:function(){this.password!=this.password1?this.err="两次输入不一致":this.err=""},onPnumChanged:function(){11!=this.pnum.length?this.errpnum="手机号格式错误":this.errpnum=""},afterReadAvatar:function(e){var a=this;lrz(e.file,{quality:.7}).then(function(e){a.avatar=e.base64.slice(23)}).catch(function(e){a.$toast.fail("上传失败")}),this.avatar=e.content.slice(23)},afterReadFace:function(e){var a=this;lrz(e.file,{quality:.7}).then(function(e){a.imgfile=e.base64.slice(23)}).catch(function(e){a.$toast.fail("上传失败")}),this.imgfile=e.content.slice(23)},sentIdentify:function(){var e=this,a=60;this.time||(this.count=a,this.disabled=!0,this.time=setInterval(function(){e.count>0&&e.count<=a?e.count--:(e.disabled=!1,clearInterval(e.time),e.time=0,e.count=a)},1e3));var n=899999*Math.random()+1e5,s=(0,i.default)(n,10);this.identifyCode=s;var r=t("9ad7"),o={method:"POST",uri:"http://101.201.70.76:8211/getSms",form:{mobile:this.pnum,code:'{"code":"'+this.identifyCode+'"}'}};r(o).then(function(a){"error"!=a?e.$toast.success("发送成功"):e.$toast.fail("发送失败，请检查网络连接")}).catch(function(a){e.$toast.fail("发送失败，请检查网络连接")})},handleClick:function(){var e=this;if(this.$toast.loading({duration:0,forbidClick:!0,message:"注册中"}),""==this.sms||""==this.username||""==this.password||""==this.name||""==this.pnum||""==this.email||""==this.avatar||""==this.imgfile)return this.$toast.clear(),void this.$toast.fail("请填写必填信息");if(this.sms!=this.identifyCode)return this.$toast.clear(),void this.$toast.fail("验证码错误，请准确填写验证码！");var a=t("9ad7"),n={method:"POST",uri:"http://101.201.70.76:8211/insertUser",form:{username:this.username,password:this.password,name:this.name,pnum:this.pnum,email:this.email,gender:this.gender,avatar:this.avatar,imgbase64:this.imgfile,power:"0"}};a(n).then(function(a){e.$toast.clear(),e.$toast.fail("注册成功！");var t=JSON.parse(a),n={username:t.username,name:t.name,pnum:t.pnum,email:t.email,gender:t.gender,power:t.power,id:t.id};e.$cookies.set("userInfo",n,604800),e.$router.push({path:"/pages/register/registerRole"})}).catch(function(a){e.$toast.clear(),e.$toast.fail("注册失败，请检查网络连接！")})}}};a.default=s},"358d":function(e,a,t){"use strict";t.r(a);var n=t("0cbc"),i=t.n(n);for(var s in n)"default"!==s&&function(e){t.d(a,e,function(){return n[e]})}(s);a["default"]=i.a},6102:function(e,a,t){"use strict";var n=t("6281"),i=t.n(n);i.a},6281:function(e,a,t){var n=t("b7c1");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=t("4f06").default;i("29b951af",n,!0,{sourceMap:!1,shadowMode:!1})},8549:function(e,a,t){"use strict";t.r(a);var n=t("e604"),i=t("358d");for(var s in i)"default"!==s&&function(e){t.d(a,e,function(){return i[e]})}(s);t("6102");var r=t("2877"),o=Object(r["a"])(i["default"],n["a"],n["b"],!1,null,"3863ed2a",null);a["default"]=o.exports},b7c1:function(e,a,t){a=e.exports=t("2350")(!1),a.push([e.i,".xieyi[data-v-3863ed2a]{background:#efeff4;font-size:18px;font-style:italic}.submit[data-v-3863ed2a]{width:84%;margin:2% 8%;background:#21a9f5;color:#fff;border:0;font-size:1em;font-family:Microsoft YaHei}.innerImg[data-v-3863ed2a]{width:%?200?%;height:%?200?%}.innerImg2[data-v-3863ed2a]{width:%?200?%;height:%?250?%}",""])},e604:function(e,a,t){"use strict";var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-uni-view",[t("van-cell-group",[t("van-field",{attrs:{label:"用户名","left-icon":"contact",placeholder:"请输入用户名"},model:{value:e.username,callback:function(a){e.username=a},expression:"username"}}),t("van-field",{attrs:{label:"姓名","left-icon":"user-circle-o",placeholder:"请输入真实姓名"},model:{value:e.name,callback:function(a){e.name=a},expression:"name"}}),t("van-field",{attrs:{label:"邮箱","left-icon":"free-postage",placeholder:"请输入电子邮箱"},model:{value:e.email,callback:function(a){e.email=a},expression:"email"}}),t("van-field",{attrs:{label:"手机号","left-icon":"phone-o",placeholder:"请输入手机号","error-message":e.errpnum},on:{blur:function(a){a=e.$handleEvent(a),e.onPnumChanged(a)}},model:{value:e.pnum,callback:function(a){e.pnum=a},expression:"pnum"}}),t("van-field",{attrs:{label:"密码",type:"password","left-icon":"label-o",placeholder:"请输入6-20位密码",maxlength:"20"},model:{value:e.password,callback:function(a){e.password=a},expression:"password"}}),t("van-field",{attrs:{type:"password",label:"确认密码","left-icon":"label-o",placeholder:"请再次输入密码",input:"onPswChanged",maxlength:"20","error-message":e.err},on:{blur:function(a){a=e.$handleEvent(a),e.onPswChanged(a)}},model:{value:e.password1,callback:function(a){e.password1=a},expression:"password1"}})],1),t("van-cell-group",[t("van-radio-group",{model:{value:e.gender,callback:function(a){e.gender=a},expression:"gender"}},[t("van-cell-group",[t("van-cell",{attrs:{title:"我是男性",clickable:""},on:{click:function(a){a=e.$handleEvent(a),e.gender="0"}}},[t("van-radio",{attrs:{slot:"right-icon",name:"0"},slot:"right-icon"})],1),t("van-cell",{attrs:{title:"我是女性",clickable:""},on:{click:function(a){a=e.$handleEvent(a),e.gender="1"}}},[t("van-radio",{attrs:{slot:"right-icon",name:"1"},slot:"right-icon"})],1)],1)],1)],1),t("van-cell-group",[t("van-field",{attrs:{center:"",clearable:"",label:"短信验证码","left-icon":"chat-o",placeholder:"请输入短信验证码"},model:{value:e.sms,callback:function(a){e.sms=a},expression:"sms"}},[t("van-button",{attrs:{slot:"button",size:"small",disabled:e.disabled,type:"primary"},on:{click:function(a){a=e.$handleEvent(a),e.sentIdentify(a)}},slot:"button"},[60==e.count?[e._v("发送验证码")]:[e._v(e._s(e.count))]],2)],1)],1),t("van-cell-group",[t("v-uni-label",[e._v("上传头像")]),t("van-uploader",{attrs:{"after-read":e.afterReadAvatar,capture:"camera",multiple:"","max-count":1}}),t("img",{staticClass:"innerImg2",attrs:{src:"data:image/png;base64,"+e.avatar}})],1),t("van-cell-group",[t("v-uni-label",[e._v("上传人脸")]),t("van-uploader",{attrs:{"after-read":e.afterReadFace,capture:"camera",multiple:"","max-count":1}}),t("img",{staticClass:"innerImg2",attrs:{src:"data:image/png;base64,"+e.imgfile}})],1),t("van-checkbox",{model:{value:e.checked,callback:function(a){e.checked=a},expression:"checked"}},[e._v("同意"),t("van-button",{staticClass:"xieyi",on:{click:function(a){a=e.$handleEvent(a),e.showPopup(a)}}},[e._v("《注册协议》")])],1),t("van-popup",{model:{value:e.show,callback:function(a){e.show=a},expression:"show"}},[e._v("《注册协议》")]),t("van-button",{staticClass:"submit",attrs:{type:"info"},on:{click:function(a){a=e.$handleEvent(a),e.handleClick(a)}}},[e._v("注册")])],1)},i=[];t.d(a,"a",function(){return n}),t.d(a,"b",function(){return i})}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-investigates-addInvestigates"],{"223b":function(t,e,n){"use strict";n.r(e);var s=n("b752"),i=n("3d7e");for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);var a=n("2877"),l=Object(a["a"])(i["default"],s["a"],s["b"],!1,null,"59534b1a",null);e["default"]=l.exports},"3d7e":function(t,e,n){"use strict";n.r(e);var s=n("cd83"),i=n.n(s);for(var o in s)"default"!==o&&function(t){n.d(e,t,function(){return s[t]})}(o);e["default"]=i.a},b752:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("van-button",{attrs:{icon:"share",size:"large",type:"primary"},on:{click:function(e){e=t.$handleEvent(e),t.submit()}}},[t._v("提交审核")]),n("van-button",{attrs:{icon:"plus",size:"large",type:"info"},on:{click:function(e){e=t.$handleEvent(e),t.addTag()}}},[t._v("新增问题")]),n("van-cell-group",[n("van-field",{attrs:{label:"问卷名",placeholder:"请输入问卷名",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),n("van-field",{attrs:{rows:"1",autosize:"",label:"问卷简介",type:"textarea",placeholder:"请输入简介"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),n("van-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[n("van-collapse-item",{attrs:{title:"选择标签",name:"1"}},[n("van-checkbox-group",{attrs:{max:3},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},[n("van-cell-group",t._l(t.tags,function(e,s){return n("van-cell",{key:s,attrs:{clickable:"",title:e.name},on:{click:function(e){e=t.$handleEvent(e),t.toggle(s)}}},[n("van-checkbox",{ref:"checkboxes",refInFor:!0,attrs:{slot:"right-icon",name:e},slot:"right-icon"})],1)}),1)],1)],1)],1),t._l(t.questionList,function(e,s){return n("v-uni-view",{key:s},[0==e.type?n("van-panel",{attrs:{title:e.stem,status:"选择题"}},[t._l(e.options,function(t,e){return n("v-uni-view",{key:e},[n("van-field",{attrs:{value:t.value,label:t.option,disabled:""}})],1)}),n("v-uni-view",{attrs:{slot:"footer"},slot:"footer"},[n("van-button",{attrs:{size:"small"},on:{click:function(e){e=t.$handleEvent(e),t.modifyQst(s,0)}}},[t._v("修改")]),n("van-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){e=t.$handleEvent(e),t.deleteQst(s)}}},[t._v("删除")])],1)],2):1==e.type?n("van-panel",{attrs:{title:e.stem,status:"简答题"}},[n("v-uni-view",{attrs:{slot:"footer"},slot:"footer"},[n("van-button",{attrs:{size:"small"},on:{click:function(e){e=t.$handleEvent(e),t.modifyQst(s,1)}}},[t._v("修改")]),n("van-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){e=t.$handleEvent(e),t.deleteQst(s)}}},[t._v("删除")])],1)],1):t._e()],1)}),n("van-popup",{attrs:{position:"bottom"},model:{value:t.showAddQst,callback:function(e){t.showAddQst=e},expression:"showAddQst"}},[n("van-tabs",{attrs:{animated:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("van-tab",{attrs:{title:"选择题"}},[n("van-cell-group",[n("van-field",{attrs:{rows:"1",autosize:"",label:"题干",type:"textarea",placeholder:"请输入题干"},model:{value:t.addQstStem,callback:function(e){t.addQstStem=e},expression:"addQstStem"}})],1),t._l(t.addQstOptions,function(t,e){return n("van-cell-group",{key:e},[n("van-cell",{attrs:{title:t.option,value:"选项",label:t.value}})],1)}),n("van-button",{attrs:{type:"primary",size:"large"},on:{click:function(e){e=t.$handleEvent(e),t.createOption()}}},[t._v("新增选项")]),n("van-button",{attrs:{type:"info",size:"large"},on:{click:function(e){e=t.$handleEvent(e),t.confirmQst(0)}}},[t._v("提交")])],2),n("van-tab",{attrs:{title:"简答题"}},[n("van-cell-group",[n("van-field",{attrs:{rows:"1",autosize:"",label:"题干",type:"textarea",placeholder:"请输入题干"},model:{value:t.addQstStem,callback:function(e){t.addQstStem=e},expression:"addQstStem"}})],1),n("van-button",{attrs:{type:"info",size:"large"},on:{click:function(e){e=t.$handleEvent(e),t.confirmQst(1)}}},[t._v("提交")])],1)],1)],1),n("van-popup",{attrs:{position:"top"},model:{value:t.showAddOpt,callback:function(e){t.showAddOpt=e},expression:"showAddOpt"}},[n("van-cell-group",[n("van-field",{attrs:{rows:"1",label:"选项内容",placeholder:"选项内容"},model:{value:t.newOptionVal,callback:function(e){t.newOptionVal=e},expression:"newOptionVal"}}),n("van-button",{attrs:{type:"primary",size:"large"},on:{click:function(e){e=t.$handleEvent(e),t.confirmOption()}}},[t._v("确定")])],1)],1),n("van-popup",{attrs:{position:"top"},model:{value:t.showMdfQst,callback:function(e){t.showMdfQst=e},expression:"showMdfQst"}},[0==t.questionList[t.mdfKey].type?n("van-panel",{attrs:{title:"选择题修改"}},[n("van-field",{model:{value:t.questionList[t.mdfKey].stem,callback:function(e){t.$set(t.questionList[t.mdfKey],"stem",e)},expression:"questionList[mdfKey].stem"}}),t._l(t.questionList[t.mdfKey].options,function(e,s){return n("v-uni-view",{key:s},[n("van-field",{attrs:{label:e.option},model:{value:t.questionList[t.mdfKey].options[s].value,callback:function(e){t.$set(t.questionList[t.mdfKey].options[s],"value",e)},expression:"questionList[mdfKey].options[num].value"}})],1)}),n("v-uni-view",{attrs:{slot:"footer"},slot:"footer"},[n("van-button",{attrs:{size:"small",type:"info"},on:{click:function(e){e=t.$handleEvent(e),t.confirmModify()}}},[t._v("修改")])],1)],2):1==t.questionList[t.mdfKey].type?n("van-panel",{attrs:{title:"简答题修改"}},[n("van-field",{model:{value:t.questionList[t.mdfKey].stem,callback:function(e){t.$set(t.questionList[t.mdfKey],"stem",e)},expression:"questionList[mdfKey].stem"}}),n("v-uni-view",{attrs:{slot:"footer"},slot:"footer"},[n("van-button",{attrs:{size:"small"},on:{click:function(e){e=t.$handleEvent(e),t.confirmModify()}}},[t._v("修改")])],1)],1):t._e()],1)],2)},i=[];n.d(e,"a",function(){return s}),n.d(e,"b",function(){return i})},cd83:function(t,e,n){"use strict";var s=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(n("f499"));n("7f7f");var o={data:function(){return{name:"",questionList:[{stem:"徐英豪是不是沙雕",options:[{option:"A",value:"是"}],type:3}],userInfo:{},showAddQst:!1,showAddOpt:!1,showMdfQst:!1,active:1,addQstStem:"",newOptionVal:"",addQstOptions:[],mdfKey:0,tags:[],activeNames:[],result:[],description:""}},onLoad:function(){var t=this;null!=this.$cookies.get("userInfo")&&(this.userInfo=this.$cookies.get("userInfo"));var e=n("9ad7");e("http://101.201.70.76:8211/getTags").then(function(e){t.tags=JSON.parse(e),t.$toast.clear(),t.$toast.success("加载成功")}).catch(function(e){t.$toast.clear(),t.$toast.fail("加载失败，请检查网络连接"),console.log(e)})},methods:{addTag:function(){this.showAddQst=!0},createOption:function(){this.showAddOpt=!0,this.newOptionVal=""},confirmOption:function(){var t={option:String.fromCharCode(65+this.addQstOptions.length),value:this.newOptionVal};this.addQstOptions[this.addQstOptions.length]=t,this.newOptionVal="",this.$forceUpdate()},toggle:function(t){this.$refs.checkboxes[t].toggle(),console.log(this.result)},confirmQst:function(t){if(0==t)if(0==this.addQstOptions.length)this.$toast.fail("选项不能为空!");else if(""==this.addQstStem)this.$toast.fail("题干不能为空!");else{var e={stem:this.addQstStem,options:this.addQstOptions,type:0};this.questionList[this.questionList.length]=e,this.addQstStem="",this.addQstOptions=[],this.$forceUpdate()}else if(1==t)if(""==this.addQstStem)this.$toast.fail("题干不能为空!");else{e={stem:this.addQstStem,options:null,type:1};console.log(e),this.questionList[this.questionList.length]=e,this.addQstStem="",this.$forceUpdate()}},deleteQst:function(t){this.questionList.splice(t,1),this.$forceUpdate()},modifyQst:function(t,e){this.mdfKey=t,this.showMdfQst=!0},confirmModify:function(t,e){this.$forceUpdate()},submit:function(){var t=this;this.$toast.loading({duration:0,forbidClick:!0,message:"提交中"}),this.questionList.splice(0,1);var e=n("9ad7"),s={method:"POST",uri:"http://localhost:8080/insertInvestigate",form:{description:this.description,name:this.name,ownerId:this.userInfo.id,invDetails:(0,i.default)(this.questionList),tags:(0,i.default)(this.result)}};e(s).then(function(e){t.$toast.clear(),t.$toast.success("提交成功，请耐心等待审核")}).catch(function(e){t.$toast.clear(),t.$toast.fail("提交失败，请检查网络连接"),console.log(e)})}}};e.default=o}}]);